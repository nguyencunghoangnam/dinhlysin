
<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<title>Kh√°m ph√° ƒë·ªãnh l√Ω Sin</title>
<style>
    :root {
      --main-color: #2c3e50;
      --accent-color: #3498db;
      --bg-light: #f4f6f8;
      --box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 40px;
      display: flex;
      flex-direction: row;
      gap: 40px;
      background-color: var(--bg-light);
      color: var(--main-color);
      padding-top: 100px;
    }
    .page-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 20px 0;
      text-align: center;
      font-size: 28px;
      font-weight: bold;
      background: linear-gradient(to right, #3498db, #2ecc71);
      color: white;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      z-index: 10;
    }
    .form-section {
      max-width: 360px;
      background: white;
      padding: 20px 25px;
      border-radius: 12px;
      box-shadow: var(--box-shadow);
    }
    label {
      margin-top: 10px;
      font-weight: bold;
      display: block;
    }
    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 12px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 15px;
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 8px;
      width: 100%;
    }
    button:hover {
      background-color: #2980b9;
    }
    #trig√≥c-canvas {
      border: 2px solid #ccc;
      border-radius: 8px;
      background-color: white;
      box-shadow: var(--box-shadow);
    }
    .question {
      font-weight: bold;
      margin-bottom: 20px;
      font-size: 16px;
    }
    #solution {
      margin-top: 15px;
      padding: 10px;
      background: #ecf9f9;
      border-left: 4px solid var(--accent-color);
      border-radius: 8px;
    }
  
    .info-section {
      width: 300px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: var(--box-shadow);
      font-size: 15px;
      line-height: 1.5;
    }

</style>
</head>
<body>
<div class="page-header">üîç Kh√°m ph√° ƒë·ªãnh l√Ω Sin</div>
<div class="form-section">
<div class="question" id="question">Cho tam gi√°c ABC, bi·∫øt AB = 80, g√≥c A = 45¬∞, g√≥c B = 60¬∞. T√≠nh c·∫°nh BC.</div>
<label for="ab">C·∫°nh AB:</label>
<input id="ab" min="1" type="number" value="80"/>
<label for="g√≥cA">G√≥c A (ƒë·ªô):</label>
<input id="g√≥cA" max="179" min="1" type="number" value="45"/>
<label for="g√≥cB">G√≥c B (ƒë·ªô):</label>
<input id="g√≥cB" max="179" min="1" type="number" value="60"/>
<button onclick="toggleSinSolution()">Hi·ªán/·∫®n t√≠nh BC theo ƒë·ªãnh l√Ω sin</button>
<div id="sin-solution" style="display:none; margin-top:10px; color:blue;"></div>
<button onclick="toggleBHSolution()">Hi·ªán/·∫®n t√≠nh BC b·∫±ng c√°ch k·∫ª ƒë∆∞·ªùng cao BH</button>
<div id="ah-solution" style="display:none; margin-top:10px; color:purple;"></div>
<button onclick="randomizeInputs()">Ng·∫´u nhi√™n</button><button onclick="generateTestQuestion()" style="margin-top: 8px; width: 100%;">C√¢u h·ªèi ki·ªÉm tra</button>
<div><strong>ƒê√°p √°n:</strong> <span id="result">BC = ?</span></div>
<div id="solution" style="color: green;"></div>
</div>
<canvas height="500" id="trig√≥c-canvas" width="500"></canvas>
<script>
    const abInput = document.getElementById("ab");
    const g√≥cAInput = document.getElementById("g√≥cA");
    const g√≥cBInput = document.getElementById("g√≥cB");
    const questionEl = document.getElementById("question");
    const resultEl = document.getElementById("result");
    const canvas = document.getElementById("trig√≥c-canvas");
    const ctx = canvas.getContext("2d");

    function toRadians(deg) {
      return deg * Math.PI / 180;
    }

    function updateQuestionAndAnswer() {

document.getElementById("sin-solution").style.display = "none";
document.getElementById("sin-solution").innerHTML = "";
document.getElementById("ah-solution").style.display = "none";
document.getElementById("ah-solution").innerHTML = "";
      const AB = parseFloat(abInput.value);
      const g√≥cA = parseFloat(g√≥cAInput.value);
      const g√≥cB = parseFloat(g√≥cBInput.value);
      const g√≥cC = 180 - g√≥cA - g√≥cB;
      if (g√≥cC <= 0) {
        resultEl.textContent = "Tam gi√°c kh√¥ng h·ª£p l·ªá!";
        document.getElementById("sin-solution").style.display = "none";
        document.getElementById("sin-solution").innerHTML = "";
        document.getElementById("ah-solution").style.display = "none";
        document.getElementById("ah-solution").innerHTML = "";
        return;
      }
      const g√≥cARad = toRadians(g√≥cA);
      const g√≥cCRad = toRadians(g√≥cC);
      const BC = (Math.sin(g√≥cARad) / Math.sin(g√≥cCRad)) * AB;
      questionEl.textContent = `Cho tam gi√°c ABC, bi·∫øt AB = ${AB}, g√≥c A = ${g√≥cA}¬∞, g√≥c B = ${g√≥cB}¬∞. T√≠nh c·∫°nh BC.`;
      resultEl.textContent = `BC = ${BC.toFixed(2)}`;
      drawTrig√≥cSin(AB, g√≥cA, g√≥cB);
    }

    function drawTrig√≥cSin(AB, g√≥cA, g√≥cB) {
      const scale = 4;
      const offsetX = 80;
      const offsetY = 400;

      const Ax = offsetX;
      const Ay = offsetY;
      const Bx = offsetX + AB * scale;
      const By = offsetY;

      const g√≥cARad = toRadians(g√≥cA);
      const g√≥cBRad = toRadians(g√≥cB);
      const g√≥cC = 180 - g√≥cA - g√≥cB;
      const g√≥cCRad = toRadians(g√≥cC);

      const AC = (Math.sin(g√≥cBRad) / Math.sin(g√≥cCRad)) * AB;

      const Cx = offsetX + AC * scale * Math.cos(g√≥cARad);
      const Cy = offsetY - AC * scale * Math.sin(g√≥cARad);

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath();
      ctx.moveTo(Ax, Ay);
      ctx.lineTo(Bx, By);
      ctx.lineTo(Cx, Cy);
      ctx.closePath();
      ctx.stroke();

      ctx.fillText("A", Ax - 10, Ay + 15);
      ctx.fillText("B", Bx + 5, By + 15);
      ctx.fillText("C", Cx + 5, Cy - 10);

      // V·∫Ω ƒë∆∞·ªùng cao BH t·ª´ B xu·ªëng AC
      const dx = Cx - Ax;
      const dy = Cy - Ay;
      const t = ((Bx - Ax) * dx + (By - Ay) * dy) / (dx * dx + dy * dy);
      const Hx = Ax + t * dx;
      const Hy = Ay + t * dy;

      
      // BH - n√©t li·ªÅn m√†u ƒë·ªè
      ctx.setLineDash([]);
      ctx.strokeStyle = "red";
      ctx.beginPath();
      ctx.moveTo(Bx, By);
      ctx.lineTo(Hx, Hy);
      ctx.stroke();

      // AH - n√©t ƒë·ª©t m√†u ƒëen
      ctx.setLineDash([5, 5]);
      ctx.strokeStyle = "black";
      ctx.beginPath();
      ctx.moveTo(Ax, Ay);
      ctx.lineTo(Hx, Hy);
      ctx.stroke();

      // CH - n√©t ƒë·ª©t m√†u ƒëen
      ctx.beginPath();
      ctx.moveTo(Cx, Cy);
      ctx.lineTo(Hx, Hy);
      ctx.stroke();

      ctx.setLineDash([]);
      ctx.strokeStyle = "black";
      ctx.fillText("H", Hx - 10, Hy);


    }

    function randomizeInputs() {
      abInput.value = Math.floor(Math.random() * 81) + 20;
      g√≥cAInput.value = Math.floor(Math.random() * 60) + 30;
      g√≥cBInput.value = Math.floor(Math.random() * (180 - g√≥cAInput.value - 20)) + 10;
      updateQuestionAndAnswer();
    }

    function toggleSinSolution() {
      const AB = parseFloat(abInput.value);
      const g√≥cA = parseFloat(g√≥cAInput.value);
      const g√≥cB = parseFloat(g√≥cBInput.value);
      const g√≥cC = 180 - g√≥cA - g√≥cB;
      const g√≥cARad = toRadians(g√≥cA);
      const g√≥cCRad = toRadians(g√≥cC);
      const BC = (Math.sin(g√≥cARad) / Math.sin(g√≥cCRad)) * AB;

      const solDiv = document.getElementById("sin-solution");
      if (solDiv.style.display === "none") {
        solDiv.style.display = "block";
        solDiv.innerHTML = `
          <strong>√Åp d·ª•ng ƒë·ªãnh l√Ω sin:</strong><br/>
          <math>
            <mrow>
              <mfrac>
                <mi>AB</mi>
                <mi>sinC</mi>
              </mfrac>
              <mo>=</mo>
              <mfrac>
                <mi>BC</mi>
                <mi>sinA</mi>
              </mfrac>
              <mo>‚áí</mo>
              <mi>BC</mi>
              <mo>=</mo>
              <mfrac>
                <mrow><mi>sin</mi><mo>(</mo><mn>${g√≥cA}¬∞</mn><mo>)</mo></mrow>
                <mrow><mi>sin</mi><mo>(</mo><mn>${180 - g√≥cA - g√≥cB}¬∞</mn><mo>)</mo></mrow>
              </mfrac>
              <mo>√ó</mo>
              <mi>${AB}</mi>
            </mrow>
          </math>
          <div>
            ‚áí BC = ${BC.toFixed(2)}
          </div>
        `;
      } else {
        solDiv.style.display = "none";
        solDiv.innerHTML = "";
      }
    }

    function toggleBHSolution() {
      const AB = parseFloat(abInput.value);
      const g√≥cA = parseFloat(g√≥cAInput.value);
      const g√≥cB = parseFloat(g√≥cBInput.value);

      const g√≥cBRad = toRadians(g√≥cB);

      const BH = AB * Math.sin(g√≥cARad);
      
      const BC = Math.sqrt(BH * BH + CH * CH);

      const solDiv = document.getElementById("ah-solution");
      if (solDiv.style.display === "none") {
        solDiv.style.display = "block";
        solDiv.innerHTML = `
          <strong>Gi·∫£i b·∫±ng c√°ch d·ª±ng ƒë∆∞·ªùng cao BH t·ª´ B xu·ªëng c·∫°nh AC:</strong>
          <math><mrow><mi>BH</mi><mo>=</mo><mi>AB</mi><mo>√ó</mo><mi>sin</mi><mo>(</mo><mn>${g√≥cB}¬∞</mn><mo>)</mo></mrow></math>
          <math><mrow><mi>CH</mi><mo>=</mo><mi>AB</mi><mo>√ó</mo><mi>cos</mi><mo>(</mo><mn>${g√≥cB}¬∞</mn><mo>)</mo></mrow></math>
          <math><mrow><msup><mi>BC</mi><mn>2</mn></msup><mo>=</mo><msup><mi>BH</mi><mn>2</mn></msup><mo>+</mo><msup><mi>CH</mi><mn>2</mn></msup></mrow></math>
          <math><mrow><mi>BC</mi><mo>=</mo><msqrt><mn>${(BH*BH + CH*CH).toFixed(2)}</mn></msqrt><mo>=</mo><mn>${BC.toFixed(2)}</mn></mrow></math>
        `;
      } else {
        solDiv.style.display = "none";
        solDiv.innerHTML = "";
      }
    }

    abInput.addEventListener("input", updateQuestionAndAnswer);
    g√≥cAInput.addEventListener("input", updateQuestionAndAnswer);
    g√≥cBInput.addEventListener("input", updateQuestionAndAnswer);

    updateQuestionAndAnswer();
  
    function toggleBHSolution() {
      const AB = parseFloat(abInput.value);
      const g√≥cA = parseFloat(g√≥cAInput.value);
      const g√≥cB = parseFloat(g√≥cBInput.value);
      const g√≥cC = 180 - g√≥cA - g√≥cB;
      const g√≥cARad = toRadians(g√≥cA);
      const g√≥cCRad = toRadians(g√≥cC);

      const BH = AB * Math.sin(g√≥cARad);
      
      const sinA = Math.sin(g√≥cARad);
      const sinC = Math.sin(g√≥cCRad);
      const BC = (sinA / sinC) * AB;

      const solDiv = document.getElementById("ah-solution");
      if (solDiv.style.display === "none") {
        solDiv.style.display = "block";
        solDiv.innerHTML = `
          <strong>Gi·∫£i b·∫±ng c√°ch d·ª±ng ƒë∆∞·ªùng cao BH t·ª´ B xu·ªëng c·∫°nh AC:</strong><br/><math><mrow><mi>\g√≥c C</mi><mo>=</mo><mn>180</mn><mo>‚àí</mo><mn>${g√≥cA}</mn><mo>‚àí</mo><mn>${g√≥cB}</mn><mo>=</mo><mn>${g√≥cC}¬∞</mn></mrow></math><br/><math><mrow><mi>BH</mi><mo>=</mo><mi>AB</mi><mo>√ó</mo><mi>sin</mi><mo>(</mo><mn>${g√≥cA}¬∞</mn><mo>)</mo></mrow></math><br/><math><mrow><mi>BH</mi><mo>=</mo><mi>BC</mi><mo>√ó</mo><mi>sin</mi><mo>(</mo><mn>${g√≥cC}¬∞</mn><mo>)</mo></mrow></math><br/>
          
                    
          <math>
            <mrow>
              <mfrac>
                <mi>AB</mi>
                <mi>sinC</mi>
              </mfrac>
              <mo>=</mo>
              <mfrac>
                <mi>BC</mi>
                <mi>sinA</mi>
              </mfrac>
              <mo>‚áí</mo>
              <mi>BC</mi>
              <mo>=</mo>
              <mfrac>
                <mrow><mi>sin</mi><mo>(</mo><mn>${g√≥cA}¬∞</mn><mo>)</mo></mrow>
                <mrow><mi>sin</mi><mo>(</mo><mn>${g√≥cC}¬∞</mn><mo>)</mo></mrow>
              </mfrac>
              <mo>√ó</mo>
              <mi>${AB}</mi>
            </mrow>
          </math><br/>
          <div>‚áí BC = ${BC.toFixed(2)}</div>
        `;
      } else {
        solDiv.style.display = "none";
        solDiv.innerHTML = "";
      }
    }


function checkAnswer() {
  const userAnswer = parseFloat(document.getElementById("user-answer").value);
  const AB = parseFloat(abInput.value);
  const g√≥cA = parseFloat(g√≥cAInput.value);
  const g√≥cB = parseFloat(g√≥cBInput.value);
  const g√≥cC = 180 - g√≥cA - g√≥cB;
  const g√≥cARad = toRadians(g√≥cA);
  const g√≥cCRad = toRadians(g√≥cC);
  const correctBC = (Math.sin(g√≥cARad) / Math.sin(g√≥cCRad)) * AB;
  const feedback = document.getElementById("solution");
  
  lockInputs(false);
  const input = document.getElementById("user-answer");
  if (input) input.readOnly = true;

  if (Math.abs(userAnswer - correctBC) < 0.1) {
    feedback.innerHTML = "‚úÖ ƒê√∫ng r·ªìi!";
  } else {
    feedback.innerHTML = "‚ùå Sai r·ªìi. H√£y th·ª≠ l·∫°i.";
  }
}


let isLocked = false;
function lockInputs(lock) {
  isLocked = lock;
  document.getElementById("ab").disabled = lock;
  document.getElementById("g√≥cA").disabled = lock;
  document.getElementById("g√≥cB").disabled = lock;

  const buttons = document.querySelectorAll(".form-section button");
  buttons.forEach(btn => {
    if (!btn.id.includes("check-btn")) {
      btn.disabled = lock;
    }
  });
  const input = document.getElementById("user-answer");
  if (input) input.readOnly = true;
}

function generateTestQuestion() {
  lockInputs(true);
  randomizeInputs();
  resultEl.textContent = "BC = ?";
  const existingInput = document.getElementById("user-answer");
  const existingButton = document.getElementById("check-btn");
  if (!existingInput) {
    const inputBox = document.createElement("input");
    inputBox.type = "number";
    inputBox.id = "user-answer";
    inputBox.placeholder = "Nh·∫≠p gi√° tr·ªã BC";
    inputBox.style.marginTop = "10px";
    inputBox.style.width = "100%";
    document.querySelector(".form-section").appendChild(inputBox);
  }
  if (!existingButton) {
    const checkBtn = document.createElement("button");
    checkBtn.textContent = "Ki·ªÉm tra";
    checkBtn.id = "check-btn";
    checkBtn.onclick = checkAnswer;
    document.querySelector(".form-section").appendChild(checkBtn);
  }
  document.getElementById("solution").innerHTML = "";
}

</script>

<div class="info-section">
  <h3>üìò Ki·∫øn th·ª©c li√™n quan</h3>
  <p>ƒê·ªãnh l√Ω sin li√™n h·ªá c√°c c·∫°nh v√† g√≥c c·ªßa m·ªôt tam gi√°c b·∫•t k·ª≥:</p>
  <p style="font-style: italic;">Trong tam gi√°c ABC, ta c√≥:</p>
  <p style="text-align: center;">
    <math>
      <mrow>
        <mfrac><mi>AB</mi><mi>sinC</mi></mfrac>
        <mo>=</mo>
        <mfrac><mi>BC</mi><mi>sinA</mi></mfrac>
        <mo>=</mo>
        <mfrac><mi>AC</mi><mi>sinB</mi></mfrac>
        <mo>=</mo>
        <mn>2</mn><mi>R</mi>
      </mrow>
    </math>
  </p>
    <hr/>
  <p>üëâ Khi bi·∫øt hai g√≥c v√† c·∫°nh xen gi·ªØa (G-C-G), b·∫°n lu√¥n c√≥ th·ªÉ √°p d·ª•ng ƒë·ªãnh l√Ω sin ƒë·ªÉ t√¨m c·∫°nh c√≤n l·∫°i.</p>
</div>

</body>
</html>
